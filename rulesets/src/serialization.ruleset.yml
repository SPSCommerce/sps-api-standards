rules:
  # Author: Andrzej (https://github.com/jerzyn)
  request-support-json-oas3:
    description: Every request SHOULD support `application/json` media type
    formats: [oas3]
    severity: error
    message: "{{description}}: {{error}}"
    given: $.paths.[*].requestBody.content[?(@property.indexOf('json') === -1)]^
    then:
      function: falsy